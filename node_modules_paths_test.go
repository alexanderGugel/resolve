package resolve

import (
	"testing"
	"reflect"
)

func TestNodeModulesPaths(t *testing.T) {
    type testCase struct {
    	start  string
		expected []string
    }

	testCases := []testCase{
		testCase{"/1/2/3/module_1", []string{
			"/1/2/3/module_1/node_modules",
			"/1/2/3/node_modules",
			"/1/2/node_modules",
			"/1/node_modules",
			"/node_modules"},
		},
		testCase{"/test/module_0/node_modules/module_1/node_modules/module_2", []string{
			"/test/module_0/node_modules/module_1/node_modules/module_2/node_modules",
			"/test/module_0/node_modules/module_1/node_modules",
		},
		},
	}

	for _, testCase := range testCases {
		actual := nodeModulesPaths(testCase.start)
		if !reflect.DeepEqual(actual, testCase.expected) {
			t.Errorf("got %q, expected %q", actual, testCase.expected)
		}
	}
}
